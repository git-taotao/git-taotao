<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<script src="__STATIC__/jquery-1.8.3.min.js"></script>
</head>
<body style="text-align:center;">
<h1>学生信息表</h1>
<h3><a href="/index/stu/index">查看学生信息</a></h3>
<h3><a href="/index/stu/add">添加学生信息</a></h3>
<form onsubmit='sub($(this))' action="javascript:;">
	<input type="hidden" name="id" value="{$v.id}">
	<h1>姓名：<input type="text" name="name" value='{$v.name}' required></h1>
	<h1>年纪：<input type="text" name="age" value='{$v.age}' required></h1>
	<h1>班级：<input type="text" name="class" value='{$v.class}' required></h1>
	<h1>性别：
		<input type="radio" name="sex" value='w' required {if condition="$v.sex=='w'"} checked{/if}>女
		<input type="radio" name="sex" value='m' required {if condition="$v.sex=='m'"} checked{/if}>男
	</h1>
	<h1><input type="submit"></h1>
</form>	
</body>
<script type="text/javascript">
	function sub($this){
		//serialize() 方法通过序列化表单值，创建 URL 编码文本字符串,?name=aaa&age=10&class=12&sex=w。
		// alert($this.serialize());  //---$this代表jquery表单对象
		$.ajax({
			type:'get',
			data:$this.serialize(),
			url:"{:url('Stu/update')}",
			dataType:"text",
			success:function(data){
				// alert(data);
				if (data>0) {
					alert('修改成功');
					// window.location.replace("/index/stu/index");
					window.location.href = "index";
				}else{
					alert('修改失败');
					// window.location.replace("/index/stu/index");
					window.location.href = "index";
				}
			},
			error:function(){
				alert('请求失败');
			}
		})
	}
</script>
</html>